# Self-Contribution Penalty Evaluation Report

## Overview

Good Egg applies a 0.3x weight multiplier to contributions to self-owned
repositories (where the PR author is the repo owner). This evaluation tests
whether this penalty is appropriately calibrated by comparing three variants:

| Variant | Self-owned repo edges | Source |
|---------|----------------------|--------|
| 0.3x (current) | Included, 0.3x weight | Existing scores |
| 1.0x (no penalty) | Included, full weight | Existing ablation |
| 0.0x (full exclusion) | Removed from graph | Re-scored |

### The Double-Negation Confound

Self-owned test PRs were excluded from the study dataset in Stage 1
(stage2_discover_authors.py) because they create a double-negation confound:
a PR to a self-owned repo is simultaneously a test observation and a
contribution that inflates the score. This evaluation focuses on whether
self-owned repos in an author's *contribution history* (not test PRs)
should be penalized, kept at full weight, or excluded entirely.

## Self-Ownership in the Data

- **Total unique authors**: 2,251
- **Authors with self-owned repos**: 1,398 (62.1%)
- **Authors without self-owned repos**: 853 (37.9%)

### Self-Owned PR Fraction Distribution

Among authors with self-owned repos, the fraction of their merged PRs
going to self-owned repositories:

- Mean: 0.261
- Median: 0.136
- Std: 0.291
- Min: 0.002
- Max: 1.000

## AUC Comparison

| Variant | AUC | 95% CI | SE |
|---------|-----|--------|----|
| 0.3x (current) | 0.6709 | [0.6532, 0.6887] | 0.0090 |
| 1.0x (no penalty) | 0.6709 | [0.6532, 0.6887] | 0.0090 |
| 0.0x (excluded) | 0.6704 | [0.6526, 0.6883] | 0.0091 |

## Pairwise DeLong Tests

| Comparison | AUC A | AUC B | z | Raw p | Adj. p |
|------------|-------|-------|---|------|--------|
| 0.3x vs 1.0x | 0.6709 | 0.6709 | 0.551 | 5.8151e-01 | 1.0000e+00 |
| 0.3x vs 0.0x | 0.6709 | 0.6704 | 0.345 | 7.2976e-01 | 1.0000e+00 |
| 1.0x vs 0.0x | 0.6709 | 0.6704 | 0.341 | 7.3293e-01 | 7.3293e-01 |

*Holm-Bonferroni corrected p-values.*
*\* p < 0.05, \*\* p < 0.01, \*\*\* p < 0.001*

## Score Distribution Comparison

- **Test PRs from authors with self-owned repos**: 3,278
- **Rows where 0.0x != 0.3x**: 2,287 (46.0%)
- **Mean score difference (0.0x - 0.3x)**: -0.019164
- **Max score decrease (0.3x - 0.0x)**: 0.823656

For authors WITHOUT self-owned repos, 0.0x = 0.3x by definition.

## Self-Owned Test PRs (Descriptive)

Stage 1 excluded **58** self-owned test PRs from the study
dataset to avoid the double-negation confound.

| Repo | Author | Count | Outcomes |
|------|--------|-------|----------|
| BurntSushi/ripgrep | BurntSushi | 21 | merged: 21 |
| colinhacks/zod | colinhacks | 37 | merged: 35, open: 2 |

These PRs are overwhelmingly merged (repo owners merging their own PRs),
confirming the decision to exclude them from the evaluation dataset.

## Conclusions

The self-contribution penalty (0.3x) has minimal measurable effect on
discriminative performance. This is consistent with the observation that
self-owned test PRs were already excluded from the study dataset,
so the penalty only affects *contribution history* edges rather than
the test observations themselves.

---
*Generated by evaluate_self_penalty.py*