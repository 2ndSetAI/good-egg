# Similarity Method Comparison Report

## Overview

This report compares four text similarity methods applied to the
same 1,293 PR body / repo README text pairs used in the H4
semantic similarity hypothesis test.

## Method Summary

| Method | LRT Stat | LRT p-value | Standalone AUC | AUC 95% CI | Gemini r (Pearson) |
|--------|----------|-------------|---------------|------------|-------------------|
| Gemini * | 20.818 | 5.0516e-06 | 0.4162 | [0.3821, 0.4504] | --- |
| TF-IDF | 3.435 | 6.3842e-02 | 0.4422 | [0.4086, 0.4757] | 0.5859 |
| MiniLM | 0.768 | 3.8078e-01 | 0.4691 | [0.4346, 0.5037] | 0.4382 |
| Jaccard * | 13.596 | 2.2665e-04 | 0.4412 | [0.4068, 0.4756] | 0.5009 |

*\* p < 0.05*

## Marginal Improvement (GE + merge_rate + age + sim)

| Method | Base AUC | Full AUC | AUC Diff | DeLong p | LRT p |
|--------|----------|----------|----------|---------| ------|
| Gemini | 0.6519 | 0.6796 | +0.0277 | 3.6734e-02 | 3.6336e-06 |
| TF-IDF | 0.6519 | 0.6603 | +0.0084 | 2.6523e-01 | 3.7258e-02 |
| MiniLM | 0.6519 | 0.6518 | -0.0001 | 9.8735e-01 | 3.3520e-01 |
| Jaccard | 0.6519 | 0.6679 | +0.0160 | 1.9878e-01 | 1.3286e-04 |

## Pairwise DeLong Tests (Standalone AUCs)

| Comparison | AUC A | AUC B | z | p-value |
|------------|-------|-------|---|---------|
| Gemini vs TF-IDF | 0.4162 | 0.4422 | -1.874 | 6.0976e-02 |
| Gemini vs MiniLM * | 0.4162 | 0.4691 | -2.841 | 4.4992e-03 |
| Gemini vs Jaccard | 0.4162 | 0.4412 | -1.394 | 1.6331e-01 |
| TF-IDF vs MiniLM | 0.4422 | 0.4691 | -1.521 | 1.2832e-01 |
| TF-IDF vs Jaccard | 0.4422 | 0.4412 | 0.049 | 9.6096e-01 |
| MiniLM vs Jaccard | 0.4691 | 0.4412 | 1.222 | 2.2171e-01 |

## Decision Criteria Evaluation

The key question is whether the H4 finding (semantic similarity
adds predictive value beyond GE score alone) is robust to the
choice of similarity method.

**Criteria:**
1. If all methods yield significant LRT p-values (< 0.05), the finding is robust.
2. If only Gemini is significant, the finding may be an artifact of the embedding model.
3. If no method is significant, the finding is likely spurious.

**Result:** 2/4 methods yield significant LRT: Gemini, Jaccard. The H4 finding is partially robust.

## Known Limitations

- Gemini similarities were computed during feature engineering (not recomputed here); other methods are computed fresh.
- MiniLM uses 128-token truncation vs. Gemini's larger context window, which may disadvantage it on longer texts.
- TF-IDF is fitted on the full corpus (all 2,586 texts), which could introduce minor data leakage in a strict train/test sense, but this is acceptable for a comparison study where all methods see the same data.
- Jaccard is a bag-of-words baseline with no semantic understanding.

---
*Generated by compare_similarity_methods.py*